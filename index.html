<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cholera Visualization</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<div id="choleraDeathTableGraph"></div>

<script type="text/javascript">
  Plotly.d3.tsv('./choleraDeaths.tsv', (data) => {
    const headerValues = Object.keys(data[0]);
    console.log(headerValues);
    console.log(data);
    const cellValues= [];
    const dateValue = [];
    const attackPerValue = [];
    const deathPerValue = [];
    const totalAttackValue = [];
    const totalDeathValue = [];
    for(let i = 0; i < data.length; i++) {
      const obj = Object.values(data[i]);
      dateValue.push(obj[0]);
      attackPerValue.push(obj[1]);
      deathPerValue.push(obj[2]);
      totalAttackValue.push(obj[3]);
      totalDeathValue.push(obj[4]);
    }
    cellValues.push(dateValue);
    cellValues.push(attackPerValue);
    cellValues.push(deathPerValue);
    cellValues.push(totalAttackValue);
    cellValues.push(totalDeathValue);
    console.log(cellValues);
    const choleraDeathTable = [{
      type: 'table',
      header: {
        values: headerValues,
        align: "center",
        line: { width: 1, color: 'black' },
        fill: { color: "grey" },
        font: { family: "Arial", size: 12, color: "white" }
      },
      cells: {
        values: cellValues,
        align: ["center", "right", "right", "right"],
        line: { color: "black", width: 1 },
        font: { family: "Arial", size: 11, color: ["black"] }
      }
    }];
    const choleraDeathTableLayout = {
      title: "Cholera Attacks and Deaths by Date",
      paperColor: "#f5f5f5"
    };
    const choleraDeathTablePlot = document.getElementById('choleraDeathTableGraph');
    Plotly.plot(choleraDeathTablePlot, choleraDeathTable, choleraDeathTableLayout);
  });
  Plotly.d3.tsv('./naplesCholeraAgeSexData.tsv', (data) => {return data});
  Plotly.d3.csv('./choleraDeathLocations.csv', (data) => {return data});
  Plotly.d3.csv('./choleraPumpLocations.csv', (data) => {return data});
  Plotly.d3.csv('./UKcensus1851.csv', (data) => {return data});
</script>

</body>
</html>
