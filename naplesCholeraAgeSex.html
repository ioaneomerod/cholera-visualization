<!DOCTYPE html>
<html lang="en">
<head>
  <title>Naples Cholera Visualizations</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
</head>
<body>

<div class="ui four item menu">
  <a class="item" href="index.html">About</a>
  <a class="item" href="choleraDeaths.html">Cholera Deaths in London</a>
  <a class="item" href="ukCensus.html">1851 UK Census</a>
  <a class="item" href="naplesCholeraAgeSex.html">Cholera Deaths in Naples</a>
</div>

<h1 class="ui center aligned header">1854 London Cholera Outbreak</h1>

<div id="naplesCholeraAgeSexTablePlot"></div>
<div id="naplesCholeraAgeSexBarPlot"></div>

<script type="text/javascript">
  Plotly.d3.tsv('./naplesCholeraAgeSexData.tsv', (data) => {
    const headerValues = Object.keys(data[0]);
    const cellValues= [];
    const ageValue = [];
    const maleDeathValue = [];
    const femaleDeathValue = [];

    for(let i = 0; i < data.length; i++) {
      const obj = Object.values(data[i]);
      ageValue.push(obj[0]);
      maleDeathValue.push(obj[1]);
      femaleDeathValue.push(obj[2]);
    }

    cellValues.push(ageValue);
    cellValues.push(maleDeathValue);
    cellValues.push(femaleDeathValue);

    const naplesCholeraAgeSexTable = [{
      type: 'table',
      header: {
        values: headerValues,
        align: "center",
        line: { width: 1, color: 'black' },
        fill: { color: "grey" },
        font: { family: "Arial", size: 12, color: "white" }
      },
      cells: {
        values: cellValues,
        align: ["center", "right", "right"],
        line: { color: "black", width: 1 },
        font: { family: "Arial", size: 11, color: ["black"] }
      }
    }];

    const naplesCholeraAgeSexTableLayout = {
      title: "Naples Cholera Deaths Table by Age and Sex",
      paperColor: "#f5f5f5"
    };

    const naplesCholeraAgeSexBar = [{
      type: 'bar',
      name: 'Male',
      x: ageValue,
      y: maleDeathValue,
      marker: {
        color: 'rgb(30, 180, 50)'
      }
    }, {
      type: 'bar',
      name: 'Female',
      x: ageValue,
      y: femaleDeathValue,
      marker: {
        color: 'rgb(80, 30, 150)'
      }
    }];

    const naplesCholeraAgeSexBarLayout = {
      title: 'Naples Cholera Deaths by Age and Sex',
      barMode: 'grouped',
      paperColor: "#f5f5f5",
      plotColor: "#f5f5f5",
      xAxis: {
        title: 'Age Ranges',
      },
      yAxis: {
        title: 'Male and Females'
      }
    }

    const naplesCholeraAgeSexTablePlot = document.getElementById('naplesCholeraAgeSexTablePlot');
    Plotly.plot(naplesCholeraAgeSexTablePlot, naplesCholeraAgeSexTable, naplesCholeraAgeSexTableLayout);

    const naplesCholeraAgeSexBarPlot = document.getElementById('naplesCholeraAgeSexBarPlot');
    Plotly.plot(naplesCholeraAgeSexBarPlot, naplesCholeraAgeSexBar, naplesCholeraAgeSexBarLayout);
  });

  Plotly.d3.csv('./choleraDeathLocations.csv', (data) => {return data});
  Plotly.d3.csv('./choleraPumpLocations.csv', (data) => {return data});
</script>

</body>
</html>
